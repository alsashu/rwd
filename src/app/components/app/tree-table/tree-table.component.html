<table
  class="table table-striped table-bordered table-hover table-sm"
  (contextmenu)="controler.onTableRightClick($event)"
>
  <thead>
    <tr>
      <th scope="col" class="">El√©ment</th>
      <th scope="col" *ngFor="let col of config.columns">{{ col.label }}</th>
    </tr>
  </thead>
  <!--
    [ngClass]="{'node': true, 'node-selected': getIsSelected(node)}"
-->
  <tr
    *ngFor="let node of getNodesFlatList()"
    [ngClass]="getNodeClass(node)"
    (mousedown)="controler.onRowMouseDown($event, node)"
  >
    <td>
      <span class="node-value node-value-first">
        <span class="node-indent" *ngFor="let i of getIndentArray(node.indent)">&nbsp;</span>
        <span (click)="toggleNodeIsCollapsed(node)" class="node-collapse">
          <fa-icon [icon]="getNodeIcon(node)"></fa-icon>
        </span>
        <!--
          [ngClass]="{'node-label': true, 'node-selected': node && node.object && node.object.isSelected }"
-->
        <span
          [ngClass]="{ 'node-label': true }"
          (mousedown)="controler.onNodeMouseDown($event, node)"
          (click)="controler.onNodeClick($event, node)"
          (dblclick)="controler.onNodeDoubleClick($event, node)"
          (contextmenu)="controler.onNodeRightClick($event, node)"
        >
          <!--
          pDraggable="dd" (onDragEnd)='onDragEnd($event, node)' (onDragStart)='onDragStart($event, node)'
-->
          <span *ngIf="!node.innerHtml || !isPreviewVisible">
            <span class="">{{ node.label }}</span>
          </span>
        </span>
      </span>
    </td>
    <td *ngFor="let col of config.columns">
      <div
        class="node-value"
        (click)="onNodeValueMouseDown($event, node, col)"
        (dblclick)="controler.onNodeValueDoubleClick($event, node, col)"
        (contextmenu)="controler.onNodeValueRightClick($event, node, col)"
        (mouseenter)="controler.onNodeValueMouseEnter($event, node, col)"
        (mouseleave)="controler.onNodeValueMouseLeave($event, node, col)"
        (mouseover)="controler.onNodeValueMouseOver($event, node, col)"
      >
        <span
          class="node-value-span"
          pDraggable="dd"
          (onDragStart)="onDragStartNodeValue($event, node, col)"
          (onDragEnd)="onDragEndNodeValue($event, node, col)"
          (dragover)="onDragOverNodeValue($event, node, col)"
          (drop)="onDropNodeValue($event, node, col)"
        >
          <div
            [innerHtml]="getNodeValueHtml(node, col, col.property)"
            [ngStyle]="getNodeValueStyle(node, col)"
            [ngClass]="getNodeValueClass(node, col)"
            [ngbTooltip]="getNodeValueTooltip(node, col)"
          ></div>
        </span>
        <span class="float-right me-1" *ngIf="col.actions && col.actions.length">
          <span *ngFor="let action of col.actions" class="me-1">
            <span
              *ngIf="action.isVisible(node, col)"
              (click)="action.click($event, node, col)"
              [ngbTooltip]="action.toolTip"
              placement="bottom"
            >
              <fa-icon [icon]="action.icon(node, col)"></fa-icon>
            </span>
          </span>
        </span>
      </div>
    </td>
  </tr>
</table>
<ng-template #tipContent><div [innerHtml]="tooltipHtml"></div></ng-template>
